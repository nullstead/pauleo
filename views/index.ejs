<html lang="en">

<!--head-->
<%- include('./partials/head.ejs') %>

<body class="">
      <main>
        <div class="bgimg">
          <div class="topleft">
            <img src="/img/logo.png" alt="pauLeo's logo" style="width: 35%; border-radius: 50%;">
          </div>
          <div class="middle">
            <h1>Welcome To Paul Leonard's Video Platform...</h1>
            <br>
            <hr>
            <br>
            <a href="/auth/login"><p id="dive-in">
              <% if(sessionData.firstVideo){%>
                Go To Videos &rarr;
              <% } else { %>
                Dive in &rarr;
              <% } %>
            </p></a>
          </div>
          <div class="bottomleft">
            <p>By: John Kponyo</p>
          </div>
        </div>
      </main>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!--custom scripts-->
   <script>
    document.querySelector('#logout').addEventListener('click', async function (e) { 
         e.preventDefault();
         
         try {
             const response = await fetch('/auth/logout', {
                 method: 'POST'
             });

             if (!response.ok) {
                 throw new Error('Network response was not ok');
             }

             const data = await response.json();
            
             location.replace(data.redirect);
         } catch (error) {
             console.error('There has been a problem with your fetch operation:', error);
         }
     });

   </script>


</body>
</html>