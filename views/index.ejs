<html lang="en">

<!--head-->
<%- include('./partials/head.ejs') %>

<body class="">
    
  <!--nav-->
  <!-- <nav class="navbar  bg-dark navbar-dark sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">
        <img src="/img/logo.png" alt="Avatar Logo" style="width:150px;" class="rounded-pill">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul id="nav-links" class="navbar-nav ">
          <li class="nav-item">
            <a class="nav-link text-warning" href="/">Home</a>
          </li> 
          <% // if(!sessionData.role) { %>
              <li class="nav-item">
                <a class="nav-link" href="/auth/login">Log In</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/auth/signup">Sign Up</a> 
              </li>
            <%// } %>
          <li class="nav-item">
            <a class="nav-link " href="/about">About</a>
          </li>

          <%// if(sessionData.role) { %>
            <li class="nav-item" style="cursor: pointer;">
              <p id="logout" class="nav-link last text-danger">Log Out</a>
            </li>
          <%// } %>

        </ul>
      </div>
    </div>
  </nav> -->

      <main>
        <div class="bgimg">
          <div class="topleft">
            <img src="/img/logo.png" alt="pauLeo's logo" style="width: 35%; border-radius: 50%;">
          </div>
          <div class="middle">
            <h1>Welcome To Paul Leonard's Video Platform...</h1>
            <br>
            <hr>
            <br>
            <a href="/auth/login"><p id="dive-in">
              <% if(sessionData.firstVideo){%>
                Go To Videos &rarr;
              <% } else { %>
                Dive in &rarr;
              <% } %>
            </p></a>
          </div>
          <div class="bottomleft">
            <p>By: John Kponyo</p>
          </div>
        </div>
      </main>


      <!--footer-->
      <%- // include('./partials/footer.ejs') %>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!--custom scripts-->
   <script>
    document.querySelector('#logout').addEventListener('click', async function (e) { 
         e.preventDefault();
         
         try {
             const response = await fetch('/auth/logout', {
                 method: 'POST'
             });

             if (!response.ok) {
                 throw new Error('Network response was not ok');
             }

             const data = await response.json();
            //  alert(data.message);
             location.replace(data.redirect);
         } catch (error) {
             console.error('There has been a problem with your fetch operation:', error);
         }
     });

   </script>


</body>
</html>